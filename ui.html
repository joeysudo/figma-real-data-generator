<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Real Data Generator</title>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 16px;
      color: #333;
      background-color: #f5f5f5;
      font-size: 14px;
    }
    
    h2 {
      margin-top: 0;
      margin-bottom: 16px;
      font-size: 18px;
      font-weight: 600;
      color: #333;
    }
    
    .container {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    
    .section {
      background-color: white;
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }
    
    .form-group {
      margin-bottom: 12px;
    }
    
    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
    }
    
    select, input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
    }
    
    .row {
      display: flex;
      gap: 8px;
    }
    
    .row > div {
      flex: 1;
    }
    
    button {
      background-color: #18A0FB;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
      width: 100%;
    }
    
    button:hover {
      background-color: #0D8DE3;
    }
    
    button.secondary {
      background-color: #E5E5E5;
      color: #333;
    }
    
    button.secondary:hover {
      background-color: #D5D5D5;
    }
    
    .footer {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
    }
    
    .hidden {
      display: none;
    }
    
    .tabs {
      display: flex;
      margin-bottom: 16px;
      border-bottom: 1px solid #ddd;
    }
    
    .tab {
      padding: 8px 16px;
      cursor: pointer;
      border-bottom: 2px solid transparent;
    }
    
    .tab.active {
      border-bottom: 2px solid #18A0FB;
      font-weight: 500;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .bulk-textarea {
      width: 100%;
      height: 100px;
      margin-bottom: 12px;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      resize: vertical;
      box-sizing: border-box;
    }
    
    .ai-textarea {
      width: 100%;
      height: 80px;
      margin-bottom: 12px;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      resize: vertical;
      box-sizing: border-box;
    }
    
    .loading {
      display: none;
      text-align: center;
      padding: 10px;
    }
    
    .loading.active {
      display: block;
    }
    
    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #18A0FB;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      margin: 0 auto 8px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .api-key-container {
      margin-bottom: 16px;
      padding: 12px;
      background-color: #f8f8f8;
      border-radius: 6px;
      border: 1px solid #e0e0e0;
    }
    
    .api-key-container p {
      margin: 0 0 8px 0;
      font-size: 13px;
      color: #555;
    }
    
    .api-key-input {
      font-family: monospace;
      letter-spacing: 0.5px;
    }
    
    .info-icon {
      display: inline-block;
      width: 16px;
      height: 16px;
      background-color: #18A0FB;
      color: white;
      border-radius: 50%;
      text-align: center;
      line-height: 16px;
      font-size: 12px;
      margin-left: 4px;
      cursor: help;
    }
    
    .tooltip {
      position: relative;
      display: inline-block;
    }
    
    .tooltip .tooltip-text {
      visibility: hidden;
      width: 250px;
      background-color: #555;
      color: #fff;
      text-align: left;
      border-radius: 6px;
      padding: 8px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 12px;
      line-height: 1.4;
    }
    
    .tooltip:hover .tooltip-text {
      visibility: visible;
      opacity: 1;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Real Data Generator</h2>
    
    <div class="tabs">
      <div class="tab active" data-tab="single">Single Data</div>
      <div class="tab" data-tab="bulk">Bulk Data</div>
      <div class="tab" data-tab="ai">AI Generated</div>
    </div>
    
    <div id="single-tab" class="tab-content active">
      <div class="section">
        <div class="form-group">
          <label for="dataType">Data Type</label>
          <select id="dataType">
            <option value="name">Name</option>
            <option value="email">Email</option>
            <option value="phone">Phone Number</option>
            <option value="address">Address</option>
            <option value="company">Company</option>
            <option value="date">Date</option>
            <option value="number">Number</option>
            <option value="paragraph">Paragraph</option>
          </select>
        </div>
        
        <div id="number-options" class="form-group hidden">
          <div class="row">
            <div>
              <label for="minNumber">Min</label>
              <input type="number" id="minNumber" value="0">
            </div>
            <div>
              <label for="maxNumber">Max</label>
              <input type="number" id="maxNumber" value="1000">
            </div>
          </div>
        </div>
        
        <div id="paragraph-options" class="form-group hidden">
          <label for="sentences">Number of Sentences</label>
          <input type="number" id="sentences" value="3" min="1" max="10">
        </div>
        
        <button id="generate">Generate Data</button>
      </div>
      
      <div class="section">
        <div class="form-group">
          <label>Preview</label>
          <div id="preview" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; min-height: 20px;">
            Select a data type and click Generate
          </div>
        </div>
      </div>
    </div>
    
    <div id="bulk-tab" class="tab-content">
      <div class="section">
        <div class="form-group">
          <label for="bulkDataType">Data Type</label>
          <select id="bulkDataType">
            <option value="custom">Custom Data (line by line)</option>
            <option value="names">Names</option>
            <option value="emails">Emails</option>
            <option value="phones">Phone Numbers</option>
            <option value="addresses">Addresses</option>
            <option value="companies">Companies</option>
          </select>
        </div>
        
        <div id="custom-data-input" class="form-group">
          <label for="bulkData">Enter data (one item per line)</label>
          <textarea id="bulkData" class="bulk-textarea" placeholder="Enter your data here, one item per line"></textarea>
        </div>
        
        <div id="bulk-count" class="form-group hidden">
          <label for="bulkCount">Number of items to generate</label>
          <input type="number" id="bulkCount" value="10" min="1" max="100">
        </div>
        
        <button id="generateBulk">Generate Bulk Data</button>
      </div>
    </div>
    
    <!-- AI Generated Tab -->
    <div id="ai-tab" class="tab-content">
      <div class="section">
        <!-- API Key Input Section -->
        <div class="api-key-container">
          <div class="form-group">
            <label for="geminiApiKey">
              Gemini API Key 
              <div class="tooltip">
                <span class="info-icon">?</span>
                <span class="tooltip-text">
                  Get your API key from <a href="https://aistudio.google.com/" target="_blank" style="color: #fff; text-decoration: underline;">Google AI Studio</a>. 
                  Your API key is stored locally in your browser and is never sent to our servers.
                </span>
              </div>
            </label>
            <input type="password" id="geminiApiKey" class="api-key-input" placeholder="Enter your Gemini API key" autocomplete="off">
          </div>
          <p style="margin-top: 8px; font-size: 12px;">
            <input type="checkbox" id="saveApiKey" style="width: auto; margin-right: 5px;">
            <label for="saveApiKey" style="display: inline; font-weight: normal;">Save API key in browser storage</label>
          </p>
        </div>
        
        <div class="form-group">
          <label for="aiPrompt">Describe what content you need</label>
          <textarea id="aiPrompt" class="ai-textarea" placeholder="Example: Generate 5 product names for a luxury watch brand"></textarea>
        </div>
        
        <div class="form-group">
          <label for="aiFormat">Describe the format/structure (optional)</label>
          <textarea id="aiFormat" class="ai-textarea" placeholder="Example: Each name should be on a new line and include a short tagline"></textarea>
        </div>
        
        <div class="form-group">
          <label for="aiCount">Number of items to generate</label>
          <input type="number" id="aiCount" value="5" min="1" max="20">
        </div>
        
        <button id="generateAI">Generate with AI</button>
        
        <div id="aiLoading" class="loading">
          <div class="spinner"></div>
          <div>Generating content with AI...</div>
        </div>
      </div>
      
      <div class="section">
        <div class="form-group">
          <label>AI Generated Content</label>
          <div id="aiPreview" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; min-height: 100px; white-space: pre-wrap;">
            Describe what content you need and click Generate with AI
          </div>
        </div>
        
        <button id="applyAIContent" class="secondary" style="margin-top: 8px;">Apply to Selected Layers</button>
      </div>
    </div>
    
    <div class="footer">
      <button id="cancel" class="secondary">Cancel</button>
    </div>
  </div>

  <script>
    // Initialize UI
    document.getElementById('dataType').addEventListener('change', function() {
      const dataType = this.value;
      document.getElementById('number-options').classList.toggle('hidden', dataType !== 'number');
      document.getElementById('paragraph-options').classList.toggle('hidden', dataType !== 'paragraph');
    });
    
    document.getElementById('bulkDataType').addEventListener('change', function() {
      const dataType = this.value;
      document.getElementById('custom-data-input').classList.toggle('hidden', dataType !== 'custom');
      document.getElementById('bulk-count').classList.toggle('hidden', dataType === 'custom');
    });
    
    // API Key Storage
    const apiKeyInput = document.getElementById('geminiApiKey');
    const saveApiKeyCheckbox = document.getElementById('saveApiKey');
    
    // Load saved API key if available
    if (localStorage.getItem('geminiApiKey')) {
      apiKeyInput.value = localStorage.getItem('geminiApiKey');
      saveApiKeyCheckbox.checked = true;
    }
    
    // Save API key when checkbox is checked
    saveApiKeyCheckbox.addEventListener('change', function() {
      if (this.checked && apiKeyInput.value) {
        localStorage.setItem('geminiApiKey', apiKeyInput.value);
      } else {
        localStorage.removeItem('geminiApiKey');
      }
    });
    
    // Save API key when input changes and checkbox is checked
    apiKeyInput.addEventListener('input', function() {
      if (saveApiKeyCheckbox.checked) {
        localStorage.setItem('geminiApiKey', this.value);
      }
    });
    
    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', function() {
        // Remove active class from all tabs
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        // Add active class to clicked tab
        this.classList.add('active');
        document.getElementById(`${this.dataset.tab}-tab`).classList.add('active');
      });
    });
    
    // Generate preview data
    function generatePreviewData(dataType) {
      switch (dataType) {
        case 'name':
          return "John Smith";
        case 'email':
          return "john.smith@example.com";
        case 'phone':
          return "(555) 123-4567";
        case 'address':
          return "1234 Main St, New York, NY 10001";
        case 'company':
          return "Global Technologies";
        case 'date':
          return "Jan 15, 2023";
        case 'number':
          const min = parseInt(document.getElementById('minNumber').value) || 0;
          const max = parseInt(document.getElementById('maxNumber').value) || 1000;
          return Math.floor(Math.random() * (max - min + 1) + min).toString();
        case 'paragraph':
          const sentences = parseInt(document.getElementById('sentences').value) || 3;
          return "Lorem ipsum dolor sit amet. ".repeat(sentences);
        default:
          return "Sample data";
      }
    }
    
    // Generate button click handler
    document.getElementById('generate').addEventListener('click', function() {
      const dataType = document.getElementById('dataType').value;
      const preview = document.getElementById('preview');
      
      // Show preview
      preview.textContent = generatePreviewData(dataType);
      
      // Send message to plugin code
      const message = {
        type: 'generate-data',
        dataType: dataType
      };
      
      // Add additional parameters based on data type
      if (dataType === 'number') {
        message.min = document.getElementById('minNumber').value;
        message.max = document.getElementById('maxNumber').value;
      } else if (dataType === 'paragraph') {
        message.sentences = document.getElementById('sentences').value;
      }
      
      parent.postMessage({ pluginMessage: message }, '*');
    });
    
    // Generate bulk data button click handler
    document.getElementById('generateBulk').addEventListener('click', function() {
      const dataType = document.getElementById('bulkDataType').value;
      let dataItems = [];
      
      if (dataType === 'custom') {
        // Get custom data from textarea
        const bulkData = document.getElementById('bulkData').value;
        dataItems = bulkData.split('\n').filter(item => item.trim() !== '');
      } else {
        // For predefined types, we'll let the plugin generate the data
        const count = parseInt(document.getElementById('bulkCount').value) || 10;
        
        parent.postMessage({ 
          pluginMessage: { 
            type: 'bulk-generate', 
            dataType: dataType,
            count: count
          } 
        }, '*');
        
        return;
      }
      
      if (dataItems.length === 0) {
        alert('Please enter at least one data item');
        return;
      }
      
      // Send message to plugin code
      parent.postMessage({ 
        pluginMessage: { 
          type: 'bulk-generate', 
          dataType: 'custom',
          dataItems: dataItems
        } 
      }, '*');
    });
    
    // AI Generate button click handler
    document.getElementById('generateAI').addEventListener('click', function() {
      const apiKey = document.getElementById('geminiApiKey').value.trim();
      const prompt = document.getElementById('aiPrompt').value.trim();
      const format = document.getElementById('aiFormat').value.trim();
      const count = parseInt(document.getElementById('aiCount').value) || 5;
      
      if (!apiKey) {
        alert('Please enter your Gemini API key');
        return;
      }
      
      if (!prompt) {
        alert('Please describe what content you need');
        return;
      }
      
      // Show loading indicator
      document.getElementById('aiLoading').classList.add('active');
      document.getElementById('generateAI').disabled = true;
      
      // Send message to plugin code
      parent.postMessage({ 
        pluginMessage: { 
          type: 'generate-ai-content', 
          apiKey: apiKey,
          prompt: prompt,
          format: format,
          count: count
        } 
      }, '*');
    });
    
    // Apply AI content button click handler
    document.getElementById('applyAIContent').addEventListener('click', function() {
      const aiContent = document.getElementById('aiPreview').textContent;
      
      if (aiContent === 'Describe what content you need and click Generate with AI') {
        alert('Please generate AI content first');
        return;
      }
      
      // Split content by new lines to get individual items
      const dataItems = aiContent.split('\n').filter(item => item.trim() !== '');
      
      // Send message to plugin code
      parent.postMessage({ 
        pluginMessage: { 
          type: 'bulk-generate', 
          dataType: 'custom',
          dataItems: dataItems
        } 
      }, '*');
    });
    
    // Listen for messages from the plugin code
    window.onmessage = function(event) {
      const message = event.data.pluginMessage;
      
      if (message && message.type === 'ai-content-generated') {
        // Hide loading indicator
        document.getElementById('aiLoading').classList.remove('active');
        document.getElementById('generateAI').disabled = false;
        
        // Update preview with generated content
        document.getElementById('aiPreview').textContent = message.content;
      }
    };
    
    // Cancel button click handler
    document.getElementById('cancel').addEventListener('click', function() {
      parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*');
    });
  </script>
</body>
</html> 